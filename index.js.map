{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport default function getImagesByQuery(query, page = 1) {\n  //return axios(`${query}&page=${page}`);\n\n  return axios(query, {\n    params: {\n      page: page,\n    },\n  });\n}\n","// Описаний в документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryList = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst btnMore = document.querySelector('.btn-more');\n\nexport function createGallery(images) {\n  const htmlImage = images\n    .map(\n      item => `<li class=\"gallery-cart\">\n      <a href=${item.largeImageURL}>\n      <img class=\"gallery-image\" src=${item.webformatURL} alt=${item.tags}></img>\n      <div class=\"stats\">\n        <span>Like</span>\n        <span>Views</span>\n        <span>Comments</span>\n        <span>Downloads</span>\n        <span>${item.likes}</span>\n        <span>${item.views}</span>\n        <span>${item.comments}</span>\n        <span>${item.downloads}</span>\n      </div>\n      </a>\n  </li>`\n    )\n    .join('');\n\n  //galleryList.innerHTML = htmlImage;\n  galleryList.insertAdjacentHTML('beforeend', htmlImage);\n\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  galleryList.innerHTML = '';\n}\n\nexport function showLoader() {\n  loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  loader.classList.add('hidden');\n}\n\nexport function showLoadMoreButton() {\n  btnMore.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n  btnMore.classList.add('hidden');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n//для виконання HTTP-запитів\nimport getImagesByQuery from './js/pixabay-api';\n\n//створювати HTML-розмітку для галереї\nimport { createGallery } from './js/render-functions';\n\n//повинна очищати вміст контейнера галереї\nimport { clearGallery } from './js/render-functions';\n\n//повинна додавати клас для відображення лоадера\nimport { showLoader } from './js/render-functions';\n\n//повинна прибирати клас для відображення лоадера\nimport { hideLoader } from './js/render-functions';\n\n//повинна додавати клас для відображення кнопки Load more.\nimport { showLoadMoreButton } from './js/render-functions';\n\n//повинна прибирати клас для відображення кнопки Load more.\nimport { hideLoadMoreButton } from './js/render-functions';\n\nconst form = document.querySelector('.form');\nconst btnMore = document.querySelector('.btn-more');\nconst inputForm = document.querySelector('input');\n\nconst API_KEY = '49637256-cb46921c72200043e40baf2ce';\nlet showPage = 1;\nlet valueInput = '';\n\nform.addEventListener('submit', clickSearch);\nbtnMore.addEventListener('click', showMoreResult);\n\nfunction makeQuery(valueInput) {}\n\nfunction clickSearch(event) {\n  event.preventDefault();\n  hideLoadMoreButton();\n  showPage = 1;\n  valueInput = inputForm.value.trim();\n\n  const searchParam = new URLSearchParams({\n    key: API_KEY,\n    q: valueInput,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n  });\n\n  const query = `https://pixabay.com/api/?${searchParam}`;\n  if (!valueInput) {\n    return;\n  }\n  showLoader();\n\n  clearGallery();\n  //console.log(valueInput);\n\n  inputForm.value = '';\n\n  fetchData(query);\n}\n\nasync function fetchData(query) {\n  try {\n    const response = await getImagesByQuery(query, showPage);\n    const data = response.data;\n\n    if (data.total === 0) {\n      iziToast.show({\n        color: 'red',\n        position: 'topRight',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    } else {\n      createGallery(data.hits);\n      showLoadMoreButton();\n      showPage++;\n      if (showPage > 2) {\n        const card = document.querySelector('.gallery-image');\n        if (card) {\n          const cardHeight = card.getBoundingClientRect().height;\n          window.scrollBy({\n            left: 0,\n            top: cardHeight * 2,\n            behavior: 'smooth',\n          });\n        }\n      }\n\n      const isLastPage = showPage > Math.ceil(data.totalHits / 15);\n\n      if (isLastPage) {\n        hideLoadMoreButton();\n\n        iziToast.show({\n          color: 'red',\n          position: 'topRight',\n          message: \"We're sorry, but you've reached the end of search results\",\n        });\n      } else {\n        showLoadMoreButton();\n      }\n    }\n  } catch (error) {\n    iziToast.show({\n      color: 'red',\n      position: 'topRight',\n      message: `Помилка '${error.message}'`,\n    });\n  } finally {\n    hideLoader();\n  }\n}\n\nasync function showMoreResult() {\n  //showPage++;\n  btnMore.disable = true;\n  btnMore.innerHTML = 'Loading...';\n\n  //console.log(query);\n\n  try {\n    //fetchData();\n    //const data = await getImagesByQuery(query, showPage);\n    //console.log(data);\n    //createGallery(data.hits);\n    /** */\n    const searchParam = new URLSearchParams({\n      key: API_KEY,\n      q: valueInput,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 15,\n    });\n\n    const query = `https://pixabay.com/api/?${searchParam}`;\n\n    fetchData(query);\n    /** */\n\n    btnMore.disable = false;\n    btnMore.innerHTML = 'Load more';\n  } catch (error) {\n    iziToast.show({\n      color: 'red',\n      position: 'topRight',\n      message: `Помилка: '${error.message}'`,\n    });\n  }\n}\n"],"names":["getImagesByQuery","query","page","axios","galleryList","loader","btnMore","createGallery","images","htmlImage","item","SimpleLightbox","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","inputForm","API_KEY","showPage","valueInput","clickSearch","showMoreResult","event","fetchData","data","iziToast","card","cardHeight","error"],"mappings":"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"}